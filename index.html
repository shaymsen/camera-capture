<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Auto Capture Photo</title>
</head>
<body>
  <h2>ðŸ“¸ Auto Capture Photo</h2>
  <video id="video" width="300" autoplay playsinline></video>
  <canvas id="canvas" width="300" height="200" style="display:none;"></canvas>

  <script>
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const context = canvas.getContext('2d');

    // àª•à«‡àª®à«‡àª°àª¾ àªàª•à«àª¸à«‡àª¸ àª®àª¾àª‚àª—à«‹ àª…àª¨à«‡ àª¸à«àªŸà«àª°à«€àª® àª¶àª°à« àª•àª°à«‹
    navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } })
      .then(stream => {
        video.srcObject = stream;

        // 2 àª¸à«‡àª•àª‚àª¡ àªªàª›à«€ àª«à«‹àªŸà«‹ àª–à«‡àª‚àªšà«‹ (àª† àª¸àª®àª¯ àª˜àªŸàª¾àª¡à«‹ àª•à«‡ àªµàª§àª¾àª°àª¶à«‹)
        setTimeout(() => {
          context.drawImage(video, 0, 0, canvas.width, canvas.height);
          const imageData = canvas.toDataURL('image/png');

          console.log("Auto captured image data:", imageData);

          // àª…àª¹à«€àª‚àª¥à«€ àª¤àª®à«‡ àª«à«‹àªŸà«‹ Email/Server àªªàª° àª®à«‹àª•àª²àªµàª¾àª¨à«‹ àª•à«‹àª¡ àª²àª—àª¾àªµà«‹
          alert("Photo captured automatically!");

          // àª¸à«àªŸà«àª°à«€àª® àª¬àª‚àª§ àª•àª°à«‹ (optional)
          stream.getTracks().forEach(track => track.stop());

        }, 2000); // 2000 milliseconds = 2 seconds
      })
      .catch(err => {
        alert("Camera permission denied or error: " + err);
      });
  </script>
</body>
</html>
